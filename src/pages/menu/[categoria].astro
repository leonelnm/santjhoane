---
import Layout from "../../layouts/Layout.astro";
import FiltroNavbar from "../../components/menu/FiltroNavbar.astro";
import { CategoriasOrdenadas, getPlatosByCategoria } from "../../api/platos";
import ProductsByCategoria from "../../components/menu/ProductsByCategoria.astro";
import LayoutMenu from "../../layouts/LayoutMenu.astro";

export async function getStaticPaths() {
  const categoriasArray = Array.from(CategoriasOrdenadas.entries());
  return [
    ...categoriasArray.map(([categoria]) => ({
      params: { categoria },
    })),
  ];
}

const { categoria } = Astro.params;
const products = await getPlatosByCategoria(categoria as Categoria);
---

<Layout
  title="Carta · Restaurante Sant Jhoane - Auténtica Cocina Ecuatoriana"
  description="Conoce todas las opciones de carta disponibles en Restaurante Sant Jhoane, conocido también como San Joan, un lugar para disfrutar de la mejor comida ecuatoriana en Valencia."
>
  <LayoutMenu>
    <FiltroNavbar currentCategoria={categoria} />
    <ProductsByCategoria categoria={categoria} platos={products} />
  </LayoutMenu>
</Layout>
